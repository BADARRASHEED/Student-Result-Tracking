# Sajana – Student Result Tracking & Performance Analytics System

Modern, branded demo of a school results portal. The stack remains **FastAPI + SQLAlchemy (SQLite)** on the backend and **Next.js + TypeScript + React** on the frontend, now refreshed with professional theming, seeded demo data, and richer analytics visuals.

## Highlights
- Sajana-branded UI with cohesive dark theme, sidebar navigation, and hero branding.
- JWT authentication locked to the **ADMIN** role for controlled access.
- Rich SQLite seed data: 1 admin user, 3 classes, 15 students, 8 subjects, multiple assessments and marks for realistic analytics.
- Dashboards showing live counts, pass rates, and recent assessments.
- Student profiles with trend charts, mark tables, and branded PDF report cards (“Report generated by Sajana Analytics”).
- Analytics page with subject averages, class overview, grade distribution, and student trend line.

## Setup
### Prerequisites
- Python 3.12+
- Node.js 18+
- (Recommended) Python virtual environment

### Backend (`/backend`)
1. Install dependencies:
   ```bash
   python -m venv .venv && source .venv/bin/activate
   python -m pip install -r backend/requirements.txt
   ```
2. (Optional) Environment variables — defaults work out of the box:
   ```bash
   DATABASE_URL=sqlite:///./school.db
   JWT_SECRET=devsecret
   ACCESS_TOKEN_EXPIRE_MINUTES=120
   CORS_ORIGINS=http://localhost:3000
   DEFAULT_ADMIN_EMAIL=admin@gmail.com
   DEFAULT_ADMIN_PASSWORD=admin123
   DEFAULT_ADMIN_NAME="Admin User"
   ```
3. Seed the database with demo data (creates/overwrites `school.db`):
   ```bash
   cd backend
   python seed_data.py
   ```
4. Run the API:
   ```bash
   uvicorn backend.main:app --reload --port 8000
   ```

### Frontend (`/frontend`)
1. Install dependencies:
   ```bash
   cd frontend
   npm install
   ```
2. Configure the API base (optional if using default):
   ```bash
   echo "NEXT_PUBLIC_API_BASE=http://localhost:8000" > .env.local
   ```
3. Start the dev server:
   ```bash
   npm run dev
   ```
   The app runs on http://localhost:3000.

## Demo account
- **Admin (default login)**: admin@gmail.com / admin123

Log in with the admin account to explore dashboard metrics, student directories, analytics, and PDF report cards.

## Key routes & features
- **Dashboard**: live counts for students/subjects, pass rate badge, recent assessments, and quick links.
- **Students**: searchable and class-filtered list; detail page shows student info, assessment table, performance trend, and report card download.
- **Marks Entry**: select student + assessment to record marks.
- **Analytics**: subject averages, class overview doughnut, grade distribution, and sample student trend chart.
- **Reports**: `/reports/student/{id}?term=Term 1` streams a branded PDF (“Report generated by Sajana Analytics”).

## Tests
Run backend tests:
```bash
pytest backend/tests
```

## Notes
- SQLite remains the default database (`sqlite:///./school.db`). Re-run `python seed_data.py` anytime to refresh the demo dataset.
- Environment variables are optional; defaults support local development without extra configuration.
